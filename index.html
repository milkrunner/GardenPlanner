<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#16a34a">
    <meta name="description" content="Gartenplanungs-App zur Verwaltung von Aufgaben, Arbeitern und Zeitpl√§nen">
    <title>üå± Garten Planner</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%2316a34a'/%3E%3Cpath d='M50 20 Q35 35 35 50 Q35 65 50 80 Q65 65 65 50 Q65 35 50 20Z' fill='%23dcfce7'/%3E%3Cellipse cx='50' cy='40' rx='8' ry='12' fill='%2386efac'/%3E%3Cellipse cx='40' cy='55' rx='10' ry='15' fill='%2386efac'/%3E%3Cellipse cx='60' cy='55' rx='10' ry='15' fill='%2386efac'/%3E%3Crect x='48' y='75' width='4' height='8' fill='%23166534'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%2316a34a'/%3E%3Cpath d='M50 20 Q35 35 35 50 Q35 65 50 80 Q65 65 65 50 Q65 35 50 20Z' fill='%23dcfce7'/%3E%3Cellipse cx='50' cy='40' rx='8' ry='12' fill='%2386efac'/%3E%3Cellipse cx='40' cy='55' rx='10' ry='15' fill='%2386efac'/%3E%3Cellipse cx='60' cy='55' rx='10' ry='15' fill='%2386efac'/%3E%3Crect x='48' y='75' width='4' height='8' fill='%23166534'/%3E%3C/svg%3E">
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'garden-green': {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            200: '#bbf7d0',
                            300: '#86efac',
                            400: '#4ade80',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                            800: '#166534',
                            900: '#14532d',
                        },
                    },
                },
            },
        }
    </script>
    <style>
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app" x-data="gardenPlanner()" x-cloak>
        <!-- Navigation Button -->
        <div class="fixed top-4 right-4 z-50">
            <button 
                @click="toggleView()"
                class="flex items-center gap-2 bg-white shadow-lg rounded-full px-4 py-2 hover:shadow-xl transition-shadow border border-gray-200"
            >
                <svg x-show="currentView === 'admin'" class="w-5 h-5 text-garden-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                </svg>
                <svg x-show="currentView === 'worker'" class="w-5 h-5 text-garden-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
                <span class="font-medium text-garden-green-700" x-text="currentView === 'admin' ? 'Worker Ansicht' : 'Admin Dashboard'"></span>
            </button>
        </div>

        <!-- Worker View -->
        <div x-show="currentView === 'worker'" class="min-h-screen bg-gradient-to-br from-garden-green-50 to-green-100">
            <div class="container mx-auto px-4 py-8">
                <!-- Header -->
                <div class="mb-8">
                    <h1 class="text-4xl font-bold text-garden-green-800 mb-2">
                        üå± Garten Planner - Arbeits√ºbersicht
                    </h1>
                    <p class="text-garden-green-600" x-text="getCurrentDate()"></p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Tageszeitplan -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-garden-green-700 mb-4 flex items-center gap-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Heutiger Zeitplan
                        </h2>

                        <template x-if="getTodaySchedules().length === 0">
                            <div class="text-center py-8 text-gray-500">
                                <svg class="w-12 h-12 mx-auto mb-2 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <p>Keine Termine f√ºr heute geplant</p>
                            </div>
                        </template>

                        <div class="space-y-4">
                            <template x-for="schedule in getTodaySchedules()" :key="schedule.id">
                                <div class="border-l-4 border-garden-green-500 bg-garden-green-50 p-4 rounded-r-lg">
                                    <div class="flex justify-between items-start mb-2">
                                        <h3 class="font-semibold text-lg text-garden-green-800" x-text="getTaskById(schedule.taskId)?.title"></h3>
                                        <span class="text-sm font-medium text-garden-green-600" x-text="`${schedule.startTime} - ${schedule.endTime}`"></span>
                                    </div>
                                    <div class="space-y-1 text-sm text-gray-700">
                                        <div class="flex items-center gap-2">
                                            <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                            </svg>
                                            <span x-text="getTaskById(schedule.taskId)?.location"></span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                            </svg>
                                            <span x-text="getWorkerName(schedule.workerId)"></span>
                                        </div>
                                    </div>
                                    <template x-if="schedule.notes">
                                        <p class="mt-2 text-sm text-gray-600 italic" x-text="'üí° ' + schedule.notes"></p>
                                    </template>
                                    <p class="mt-2 text-sm text-gray-600" x-text="getTaskById(schedule.taskId)?.description"></p>
                                </div>
                            </template>
                        </div>
                    </div>

                    <!-- Aufgaben√ºbersicht -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-garden-green-700 mb-4 flex items-center gap-2">
                            üìã Offene Aufgaben
                        </h2>

                        <template x-if="getOpenTasks().length === 0">
                            <div class="text-center py-8 text-gray-500">
                                <p>Keine offenen Aufgaben üéâ</p>
                            </div>
                        </template>

                        <div class="space-y-3 max-h-[600px] overflow-y-auto">
                            <template x-for="task in getOpenTasks()" :key="task.id">
                                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                    <div class="flex justify-between items-start mb-2">
                                        <h3 class="font-semibold text-lg text-gray-800" x-text="task.title"></h3>
                                        <span 
                                            class="px-2 py-1 rounded text-xs font-medium border"
                                            :class="getPriorityColor(task.priority)"
                                            x-text="getPriorityText(task.priority)"
                                        ></span>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-2" x-text="task.description"></p>
                                    <div class="flex flex-wrap gap-2 text-sm">
                                        <span class="flex items-center gap-1 text-gray-600">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                            </svg>
                                            <span x-text="task.location"></span>
                                        </span>
                                        <span class="flex items-center gap-1 text-gray-600">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                            <span x-text="task.estimatedHours + 'h'"></span>
                                        </span>
                                        <span 
                                            class="px-2 py-1 rounded text-xs"
                                            :class="getStatusColor(task.status)"
                                            x-text="getStatusText(task.status)"
                                        ></span>
                                    </div>
                                    <template x-if="task.assignedTo.length > 0">
                                        <div class="mt-2 text-sm text-gray-700">
                                            <span class="font-medium">Zugewiesen:</span>
                                            <span x-text="task.assignedTo.map(id => getWorkerName(id)).join(', ')"></span>
                                        </div>
                                    </template>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div x-show="currentView === 'admin'" class="min-h-screen bg-gray-100">
            <div class="bg-garden-green-700 text-white p-6 shadow-lg">
                <h1 class="text-3xl font-bold">üõ†Ô∏è Admin Dashboard</h1>
                <p class="text-garden-green-100 mt-1">Verwaltung der Gartenplanung</p>
            </div>

            <div class="container mx-auto px-4 py-6">
                <!-- Tabs -->
                <div class="bg-white rounded-lg shadow mb-6">
                    <div class="flex border-b">
                        <button 
                            @click="activeTab = 'tasks'; resetForm()"
                            class="flex items-center gap-2 px-6 py-3 font-medium transition-colors"
                            :class="activeTab === 'tasks' ? 'border-b-2 border-garden-green-600 text-garden-green-700' : 'text-gray-600 hover:text-gray-800'"
                        >
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                            </svg>
                            Aufgaben
                        </button>
                        <button 
                            @click="activeTab = 'workers'; resetForm()"
                            class="flex items-center gap-2 px-6 py-3 font-medium transition-colors"
                            :class="activeTab === 'workers' ? 'border-b-2 border-garden-green-600 text-garden-green-700' : 'text-gray-600 hover:text-gray-800'"
                        >
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                            Arbeiter
                        </button>
                        <button 
                            @click="activeTab = 'schedule'; resetForm()"
                            class="flex items-center gap-2 px-6 py-3 font-medium transition-colors"
                            :class="activeTab === 'schedule' ? 'border-b-2 border-garden-green-600 text-garden-green-700' : 'text-gray-600 hover:text-gray-800'"
                        >
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            Zeitplan
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Liste -->
                    <div class="lg:col-span-2">
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-bold text-gray-800" x-text="getTabTitle()"></h2>
                                <button 
                                    @click="startAddNew()"
                                    class="flex items-center gap-2 bg-garden-green-600 text-white px-4 py-2 rounded-lg hover:bg-garden-green-700 transition-colors"
                                >
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                    </svg>
                                    Neu
                                </button>
                            </div>

                            <div class="space-y-3 max-h-[600px] overflow-y-auto">
                                <!-- Tasks List -->
                                <template x-if="activeTab === 'tasks'">
                                    <div>
                                        <template x-for="task in tasks" :key="task.id">
                                            <div class="border border-gray-200 rounded-lg p-4 mb-3 hover:border-garden-green-400 transition-colors">
                                                <div class="flex justify-between items-start">
                                                    <div class="flex-1">
                                                        <h3 class="font-semibold text-gray-800" x-text="task.title"></h3>
                                                        <p class="text-sm text-gray-600 mt-1" x-text="task.description"></p>
                                                        <div class="flex gap-2 mt-2 text-xs">
                                                            <span class="px-2 py-1 bg-gray-100 rounded" x-text="task.location"></span>
                                                            <span class="px-2 py-1 bg-blue-100 text-blue-700 rounded" x-text="task.status"></span>
                                                            <span class="px-2 py-1 bg-yellow-100 text-yellow-700 rounded" x-text="task.priority"></span>
                                                        </div>
                                                    </div>
                                                    <div class="flex gap-2">
                                                        <button @click="startEdit('task', task)" class="p-2 text-blue-600 hover:bg-blue-50 rounded">
                                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                                            </svg>
                                                        </button>
                                                        <button @click="deleteItem('task', task.id)" class="p-2 text-red-600 hover:bg-red-50 rounded">
                                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                                            </svg>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </template>

                                <!-- Workers List -->
                                <template x-if="activeTab === 'workers'">
                                    <div>
                                        <template x-for="worker in workers" :key="worker.id">
                                            <div class="border border-gray-200 rounded-lg p-4 mb-3 hover:border-garden-green-400 transition-colors">
                                                <div class="flex justify-between items-start">
                                                    <div class="flex-1">
                                                        <h3 class="font-semibold text-gray-800" x-text="worker.name"></h3>
                                                        <p class="text-sm text-gray-600" x-text="worker.email"></p>
                                                        <span 
                                                            class="inline-block mt-2 px-2 py-1 text-xs rounded"
                                                            :class="worker.active ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'"
                                                            x-text="worker.active ? 'Aktiv' : 'Inaktiv'"
                                                        ></span>
                                                    </div>
                                                    <div class="flex gap-2">
                                                        <button @click="startEdit('worker', worker)" class="p-2 text-blue-600 hover:bg-blue-50 rounded">
                                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                                            </svg>
                                                        </button>
                                                        <button @click="deleteItem('worker', worker.id)" class="p-2 text-red-600 hover:bg-red-50 rounded">
                                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                                            </svg>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </template>

                                <!-- Schedule List -->
                                <template x-if="activeTab === 'schedule'">
                                    <div>
                                        <template x-for="schedule in schedules" :key="schedule.id">
                                            <div class="border border-gray-200 rounded-lg p-4 mb-3 hover:border-garden-green-400 transition-colors">
                                                <div class="flex justify-between items-start">
                                                    <div class="flex-1">
                                                        <h3 class="font-semibold text-gray-800" x-text="getTaskById(schedule.taskId)?.title || 'Unbekannt'"></h3>
                                                        <p class="text-sm text-gray-600" x-text="'Arbeiter: ' + getWorkerName(schedule.workerId)"></p>
                                                        <div class="flex gap-2 mt-2 text-xs text-gray-600">
                                                            <span x-text="'üìÖ ' + schedule.date"></span>
                                                            <span x-text="'üïê ' + schedule.startTime + ' - ' + schedule.endTime"></span>
                                                        </div>
                                                        <template x-if="schedule.notes">
                                                            <p class="text-xs text-gray-500 mt-1 italic" x-text="schedule.notes"></p>
                                                        </template>
                                                    </div>
                                                    <div class="flex gap-2">
                                                        <button @click="startEdit('schedule', schedule)" class="p-2 text-blue-600 hover:bg-blue-50 rounded">
                                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                                            </svg>
                                                        </button>
                                                        <button @click="deleteItem('schedule', schedule.id)" class="p-2 text-red-600 hover:bg-red-50 rounded">
                                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                                            </svg>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Form -->
                    <div class="lg:col-span-1">
                        <div x-show="showForm" class="bg-white rounded-lg shadow p-6 sticky top-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-bold text-gray-800" x-text="editingId ? 'Bearbeiten' : 'Neu erstellen'"></h3>
                                <button @click="resetForm()" class="p-1 text-gray-500 hover:text-gray-700">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>

                            <!-- Task Form -->
                            <div x-show="activeTab === 'tasks'" class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Titel</label>
                                    <input type="text" x-model="formData.title" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Beschreibung</label>
                                    <textarea x-model="formData.description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent"></textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Standort</label>
                                    <input type="text" x-model="formData.location" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Priorit√§t</label>
                                    <select x-model="formData.priority" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                        <option value="low">Niedrig</option>
                                        <option value="medium">Mittel</option>
                                        <option value="high">Hoch</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                    <select x-model="formData.status" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                        <option value="pending">Ausstehend</option>
                                        <option value="in-progress">In Arbeit</option>
                                        <option value="completed">Erledigt</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Gesch√§tzte Stunden</label>
                                    <input type="number" x-model.number="formData.estimatedHours" min="0.5" step="0.5" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                </div>
                                <button @click="saveTask()" class="w-full flex items-center justify-center gap-2 bg-garden-green-600 text-white px-4 py-2 rounded-lg hover:bg-garden-green-700 transition-colors">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                                    </svg>
                                    Speichern
                                </button>
                            </div>

                            <!-- Worker Form -->
                            <div x-show="activeTab === 'workers'" class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                                    <input type="text" x-model="formData.name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">E-Mail</label>
                                    <input type="email" x-model="formData.email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                </div>
                                <div class="flex items-center gap-2">
                                    <input type="checkbox" x-model="formData.active" class="w-4 h-4 text-garden-green-600 rounded focus:ring-2 focus:ring-garden-green-500">
                                    <label class="text-sm font-medium text-gray-700">Aktiv</label>
                                </div>
                                <button @click="saveWorker()" class="w-full flex items-center justify-center gap-2 bg-garden-green-600 text-white px-4 py-2 rounded-lg hover:bg-garden-green-700 transition-colors">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                                    </svg>
                                    Speichern
                                </button>
                            </div>

                            <!-- Schedule Form -->
                            <div x-show="activeTab === 'schedule'" class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Aufgabe</label>
                                    <select x-model="formData.taskId" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                        <option value="">Bitte w√§hlen</option>
                                        <template x-for="task in tasks" :key="task.id">
                                            <option :value="task.id" x-text="task.title"></option>
                                        </template>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Arbeiter</label>
                                    <select x-model="formData.workerId" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                        <option value="">Bitte w√§hlen</option>
                                        <template x-for="worker in workers" :key="worker.id">
                                            <option :value="worker.id" x-text="worker.name"></option>
                                        </template>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Datum</label>
                                    <input type="date" x-model="formData.date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                </div>
                                <div class="grid grid-cols-2 gap-2">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Start</label>
                                        <input type="time" x-model="formData.startTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Ende</label>
                                        <input type="time" x-model="formData.endTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Notizen</label>
                                    <textarea x-model="formData.notes" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-garden-green-500 focus:border-transparent"></textarea>
                                </div>
                                <button @click="saveSchedule()" class="w-full flex items-center justify-center gap-2 bg-garden-green-600 text-white px-4 py-2 rounded-lg hover:bg-garden-green-700 transition-colors">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                                    </svg>
                                    Speichern
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <script>
        function gardenPlanner() {
            return {
                currentView: 'worker',
                activeTab: 'tasks',
                showForm: false,
                editingId: null,
                formData: {},
                
                workers: [],
                tasks: [],
                schedules: [],

                init() {
                    // Daten aus LocalStorage laden
                    this.loadData();
                    
                    // Service Worker f√ºr PWA registrieren
                    if ('serviceWorker' in navigator) {
                        navigator.serviceWorker.register('/sw.js').catch(() => {});
                    }
                },

                loadData() {
                    // Versuche Daten aus LocalStorage zu laden
                    const savedWorkers = localStorage.getItem('gardenplanner_workers');
                    const savedTasks = localStorage.getItem('gardenplanner_tasks');
                    const savedSchedules = localStorage.getItem('gardenplanner_schedules');

                    if (savedWorkers) {
                        this.workers = JSON.parse(savedWorkers);
                    } else {
                        // Fallback auf Beispieldaten
                        this.workers = [
                            { id: '1', name: 'Max Mustermann', email: 'max@example.com', active: true },
                            { id: '2', name: 'Anna Schmidt', email: 'anna@example.com', active: true },
                            { id: '3', name: 'Tom Weber', email: 'tom@example.com', active: true },
                        ];
                        this.saveData();
                    }

                    if (savedTasks) {
                        this.tasks = JSON.parse(savedTasks);
                    } else {
                        // Fallback auf Beispieldaten
                        this.tasks = [
                            {
                                id: '1',
                                title: 'Rasen m√§hen',
                                description: 'Hauptrasen im Vorgarten m√§hen und Kanten schneiden',
                                location: 'Vorgarten',
                                priority: 'high',
                                status: 'pending',
                                assignedTo: ['1'],
                                estimatedHours: 2,
                            },
                            {
                                id: '2',
                                title: 'Blumenbeete anlegen',
                                description: 'Neue Blumenbeete im hinteren Bereich anlegen',
                                location: 'Hintergarten',
                                priority: 'medium',
                                status: 'in-progress',
                                assignedTo: ['2'],
                                estimatedHours: 4,
                            },
                            {
                                id: '3',
                                title: 'Hecke schneiden',
                                description: 'Gesamte Grundst√ºckshecke zur√ºckschneiden',
                                location: 'Grundst√ºcksgrenze',
                                priority: 'low',
                                status: 'pending',
                                assignedTo: ['3'],
                                estimatedHours: 3,
                            },
                        ];
                        this.saveData();
                    }

                    if (savedSchedules) {
                        this.schedules = JSON.parse(savedSchedules);
                    } else {
                        // Fallback auf Beispieldaten
                        this.schedules = [
                            {
                                id: '1',
                                taskId: '1',
                                workerId: '1',
                                date: new Date().toISOString().split('T')[0],
                                startTime: '08:00',
                                endTime: '10:00',
                                notes: 'Morgens, wenn es noch k√ºhl ist',
                            },
                            {
                                id: '2',
                                taskId: '2',
                                workerId: '2',
                                date: new Date().toISOString().split('T')[0],
                                startTime: '09:00',
                                endTime: '13:00',
                                notes: 'Materialien bereits vor Ort',
                            },
                        ];
                        this.saveData();
                    }
                },

                saveData() {
                    // Speichere alle Daten in LocalStorage
                    localStorage.setItem('gardenplanner_workers', JSON.stringify(this.workers));
                    localStorage.setItem('gardenplanner_tasks', JSON.stringify(this.tasks));
                    localStorage.setItem('gardenplanner_schedules', JSON.stringify(this.schedules));
                },

                toggleView() {
                    this.currentView = this.currentView === 'worker' ? 'admin' : 'worker';
                },

                getCurrentDate() {
                    const date = new Date();
                    const days = ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'];
                    const months = ['Januar', 'Februar', 'M√§rz', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'];
                    return `${days[date.getDay()]}, ${date.getDate()}. ${months[date.getMonth()]} ${date.getFullYear()}`;
                },

                getTodaySchedules() {
                    const today = new Date().toISOString().split('T')[0];
                    return this.schedules.filter(s => s.date === today);
                },

                getOpenTasks() {
                    return this.tasks
                        .filter(t => t.status !== 'completed')
                        .sort((a, b) => {
                            const priorityOrder = { high: 3, medium: 2, low: 1 };
                            return priorityOrder[b.priority] - priorityOrder[a.priority];
                        });
                },

                getTaskById(taskId) {
                    return this.tasks.find(t => t.id === taskId);
                },

                getWorkerName(workerId) {
                    const worker = this.workers.find(w => w.id === workerId);
                    return worker ? worker.name : 'Unbekannt';
                },

                getPriorityColor(priority) {
                    const colors = {
                        high: 'bg-red-100 text-red-800 border-red-300',
                        medium: 'bg-yellow-100 text-yellow-800 border-yellow-300',
                        low: 'bg-green-100 text-green-800 border-green-300'
                    };
                    return colors[priority] || 'bg-gray-100 text-gray-800 border-gray-300';
                },

                getPriorityText(priority) {
                    const text = {
                        high: 'Hoch',
                        medium: 'Mittel',
                        low: 'Niedrig'
                    };
                    return text[priority] || priority;
                },

                getStatusColor(status) {
                    const colors = {
                        pending: 'bg-gray-100 text-gray-700',
                        'in-progress': 'bg-blue-100 text-blue-700',
                        completed: 'bg-green-100 text-green-700'
                    };
                    return colors[status] || 'bg-gray-100 text-gray-700';
                },

                getStatusText(status) {
                    const text = {
                        pending: 'Ausstehend',
                        'in-progress': 'In Arbeit',
                        completed: 'Erledigt'
                    };
                    return text[status] || status;
                },

                getTabTitle() {
                    const titles = {
                        tasks: 'Aufgabenliste',
                        workers: 'Arbeiterliste',
                        schedule: 'Zeitplaneintr√§ge'
                    };
                    return titles[this.activeTab] || '';
                },

                resetForm() {
                    this.showForm = false;
                    this.editingId = null;
                    this.formData = {};
                },

                startAddNew() {
                    this.editingId = null;
                    this.showForm = true;
                    if (this.activeTab === 'tasks') {
                        this.formData = {
                            title: '',
                            description: '',
                            location: '',
                            priority: 'medium',
                            status: 'pending',
                            assignedTo: [],
                            estimatedHours: 1,
                        };
                    } else if (this.activeTab === 'workers') {
                        this.formData = { name: '', email: '', active: true };
                    } else if (this.activeTab === 'schedule') {
                        this.formData = {
                            taskId: '',
                            workerId: '',
                            date: new Date().toISOString().split('T')[0],
                            startTime: '08:00',
                            endTime: '12:00',
                            notes: '',
                        };
                    }
                },

                startEdit(type, item) {
                    this.editingId = item.id;
                    this.formData = { ...item };
                    this.showForm = true;
                },

                saveTask() {
                    if (this.editingId) {
                        const index = this.tasks.findIndex(t => t.id === this.editingId);
                        if (index !== -1) {
                            this.tasks[index] = { ...this.tasks[index], ...this.formData };
                        }
                    } else {
                        const newTask = {
                            ...this.formData,
                            id: Date.now().toString(),
                        };
                        this.tasks.push(newTask);
                    }
                    this.saveData(); // Speichern nach √Ñnderung
                    this.resetForm();
                },

                saveWorker() {
                    if (this.editingId) {
                        const index = this.workers.findIndex(w => w.id === this.editingId);
                        if (index !== -1) {
                            this.workers[index] = { ...this.workers[index], ...this.formData };
                        }
                    } else {
                        const newWorker = {
                            ...this.formData,
                            id: Date.now().toString(),
                        };
                        this.workers.push(newWorker);
                    }
                    this.saveData(); // Speichern nach √Ñnderung
                    this.resetForm();
                },

                saveSchedule() {
                    if (this.editingId) {
                        const index = this.schedules.findIndex(s => s.id === this.editingId);
                        if (index !== -1) {
                            this.schedules[index] = { ...this.schedules[index], ...this.formData };
                        }
                    } else {
                        const newSchedule = {
                            ...this.formData,
                            id: Date.now().toString(),
                        };
                        this.schedules.push(newSchedule);
                    }
                    this.saveData(); // Speichern nach √Ñnderung
                    this.resetForm();
                },

                deleteItem(type, id) {
                    if (!confirm('M√∂chten Sie diesen Eintrag wirklich l√∂schen?')) return;
                    
                    if (type === 'task') {
                        this.tasks = this.tasks.filter(t => t.id !== id);
                        this.schedules = this.schedules.filter(s => s.taskId !== id);
                    } else if (type === 'worker') {
                        this.workers = this.workers.filter(w => w.id !== id);
                        this.schedules = this.schedules.filter(s => s.workerId !== id);
                    } else if (type === 'schedule') {
                        this.schedules = this.schedules.filter(s => s.id !== id);
                    }
                    this.saveData(); // Speichern nach L√∂schen
                }
            }
        }
    </script>
</body>
</html>
